function RunAjax(e,t){return ToracTechnologies.Ajax.RunAjaxCall(e,t,!0,!0)}!function(){"use strict";$(document).ready(function(){$("#LogIn").click(function(){$(this).removeClass("btn-base").addClass("btn-warning")})})}();var appToracGolf=angular.module("toracApp",["ngAnimate"]);$(document).ready(function(){ToracTechnologies.Ajax.SetupAjaxWaitSpinner($("#loadingDiv"),ToracTechnologies.Ajax.FadeInOutSpeedEnum.fast)}),$.ajaxSetup({headers:{RequestVerificationToken:$("#__RequestVerificationToken").val()}}),function(){"use strict";appToracGolf.directive("datePicker",function(){return{require:"?ngModel",restrict:"A",scope:{ngModel:"="},link:function(e,t,o,n){t.datepicker({maxDate:o.maxdate,onSelect:function(t){e.$apply(function(){e.ngModel=t})}})}}})}(),function(){"use strict";appToracGolf.factory("FileReader",["$q","$log",function(e,t){var o=function(e,t,o){return function(){o.$apply(function(){t.resolve(e.result)})}},n=function(e,t,o){return function(){o.$apply(function(){t.reject(e.result)})}},a=function(e,t){return function(e){t.$broadcast("fileProgress",{total:e.total,loaded:e.loaded})}},r=function(e,t){var r=new FileReader;return r.onload=o(r,e,t),r.onerror=n(r,e,t),r.onprogress=a(r,t),r};return{ReadAsDataURL:function(t,o){var n=e.defer();if(null==t)return n.resolve(null),n.promise;var a=r(n,o);return a.readAsDataURL(t),n.promise}}}])}(),function(){"use strict";appToracGolf.factory("httpRequestInterceptor",["$q",function(e){return{request:function(e){return e.headers.RequestVerificationToken=$("#__RequestVerificationToken").val(),$("#loadingDiv").show(),e},requestError:function(t){return $("#loadingDiv").hide(),e.reject(t)},response:function(e){return $("#loadingDiv").hide(),e},responseError:function(t){return $("#loadingDiv").hide(),e.reject(t)}}}]),appToracGolf.config(["$httpProvider",function(e){e.interceptors.push("httpRequestInterceptor")}])}(),function(){"use strict";appToracGolf.directive("modal",function(){return{template:'<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">{{title}}</h4></div><div class="modal-body">{{bodyhtml}}</div><div class="modal-footer"><button type="button" class="btn btn-default {{primarybuttonclass}}" data-dismiss="modal">{{closebuttontext}}</button></div></div></div></div>',restrict:"EA",replace:!0,transclude:!0,scope:{onmodalcloseevent:"&",ShowSavedSuccessfulModal:"="},link:function(e,t,o){e.title=o.title,e.bodyhtml=o.bodyhtml,e.closebuttontext=o.closebuttontext,e.primarybuttonclass=o.primarybuttonclass,e.$parent.$watch(o.showdialog,function(e){$(t).modal(e?"show":"hide")}),$(t).on("shown.bs.modal",function(){e.$apply(function(){e.$parent[o.visible]=!0})}),$(t).on("hidden.bs.modal",function(){e.$apply(function(){e.$parent[o.visible]=!1,e.onmodalcloseevent()})})}}})}(),function(){"use strict";appToracGolf.directive("modalevent",function(){return{restrict:"EA",replace:!1,scope:{showdialog:"="},link:function(e,t,o){e.$parent.$watch(o.showdialog,function(e){$(t).modal(e?"show":"hide")}),$(t).on("shown.bs.modal",function(){e.$apply(function(){e.showdialog=!0})}),$(t).on("hidden.bs.modal",function(){e.$apply(function(){e.showdialog=!1})})}}})}(),function(){"use strict";appToracGolf.directive("numbersOnly",function(){return{require:"ngModel",restrict:"A",scope:!0,link:function(e,t,o,n){function a(e,t){if(void 0==e)return"";var o;return o=t?e.replace(/[^0-9]/g,""):e.replace(/[^0-9.]/g,""),isNaN(o)&&(o=n.$modelValue),o!=e&&(n.$setViewValue(o),n.$render()),o}e.allowInts="true"===o.numbersOnlyAllowonlyints.toLowerCase(),n.$parsers.push(function(t){var o=e.allowInts;return a(t,o)})}}})}(),function(){"use strict";appToracGolf.factory("PagerFactory",function(){return{BuildPagerModel:function(e){for(var t=[],o=0;e>o;o++)t.push(o);return t}}})}(),function(){"use strict";appToracGolf.filter("percent",["$filter",function(e){return function(t,o){return e("number")(100*t,o)+"%"}}])}(),function(){"use strict";appToracGolf.directive("select2",function(){return{require:"?ngModel",restrict:"A",scope:{ngModel:"="},link:function(e,t,o,n){e.$watch("ngModel",function(o){null!=o&&e.$$postDigest(function(){t.val(typeof e.ngModel+":"+o).trigger("change")})}),t.select2({placeholder:"Select a state"})}}})}(),function(){"use strict";appToracGolf.service("ValidationService",function(){return{ShowValidationErrors:function(e,t){if(e.validationErrors=[],t.data&&angular.isObject(t.data))for(var o in t.data)e.validationErrors.push(t.data[o][0]);else e.validationErrors.push(t.data)}}})}(),function(){appToracGolf.controller("CourseAddController",["$scope","ValidationService","FileReader","CourseHttp",function(e,t,o,n){e.init=function(t){e.model=t,e.ViewMode="AddCourse"},e.SaveACourse=function(){o.ReadAsDataURL(document.getElementById("CoursePicture").files[0],e).then(function(o){e.model.CourseImage=o,n.AddCourse(e.model,t).then(function(t){e.ShowSavedSuccessfulModal=!0},function(o){t.ShowValidationErrors(e,o)})})},e.SaveACourseDialogOkEvent=function(){window.location.href="ViewCourses"},e.AddTeeLocation=function(){e.TeeLocationTitle="Add A New Tee Location",e.InitTeeLocationView(null,{Description:"",Front9Par:null,Back9Par:null,Yardage:null,Slope:null,Rating:null,Par:function(){return parseInt(this.Front9Par)+parseInt(this.Back9Par)}})},e.EditTeeLocation=function(t){e.TeeLocationTitle="Edit Tee Location",e.InitTeeLocationView(t,e.model.TeeLocations[t])},e.InitTeeLocationView=function(t,o){e.validationErrors=[],e.TempTeeBeforeModifying={Index:t,Model:angular.copy(o)},e.ViewMode="EditTeeLocation",e.TempTeeLocation=angular.copy(o),null!=t&&e.model.TeeLocations.splice(t,1)},e.CancelTeeLocation=function(){e.validationErrors=[],null!=e.TempTeeBeforeModifying.Index&&e.model.TeeLocations.splice(e.TempTeeBeforeModifying.Index,0,e.TempTeeBeforeModifying.Model),e.ViewMode="AddCourse"},e.SaveTeeLocation=function(){return e.model.TeeLocations.Any(function(t){return t.Description===e.TempTeeLocation.Description})?void t.ShowValidationErrors(e,{data:"There is already a tee box with the same name"}):void n.AddTeeLocation(e.TempTeeLocation,t).then(function(t){e.model.TeeLocations.push(e.TempTeeLocation),e.ViewMode="AddCourse",e.validationErrors=[]},function(o){t.ShowValidationErrors(e,o)})},e.DeleteTeeLocation=function(t){e.model.TeeLocations.splice(t,1)},e.DefaultTeeButton=function(t){(t.which&&13==t.which||t.keyCode&&13==t.keyCode)&&e.SaveTeeLocation()}}])}(),function(){"use strict";appToracGolf.service("CourseHttp",["$http",function(e){return{AddCourse:function(t,o){return e.post("AddACourse",t,o)},AddTeeLocation:function(t,o){return e.post("ValidateTeeLocation",t,o)},CourseListing:function(t,o,n,a,r,i){return e.post("CourseListingSelectPage",{ResetPager:t,PageIndexId:o,SortBy:n,CourseNameFilter:a,StateFilter:r,CoursesPerPage:i})},CourseDelete:function(t){return e.post("CourseDelete",t)}}}])}(),function(){appToracGolf.controller("CourseListingController",["$scope","ValidationService","CourseHttp","PagerFactory",function(e,t,o,n){e.init=function(t,o,n,a,r,i){e.SortByLookup=o,e.CoursesPerPageLookup=r,e.SortBy=o[0].Value,e.CoursesPerPage=a,e.StateFilter=n,e.SearchByCourseName=i,e.CurrentPageId=0,e.BuildPager(t),e.FetchAPageOfData(!1)},e.BuildPager=function(t){e.TotalNumberOfPages=t,e.PagerElements=n.BuildPagerModel(t)},e.PagerClick=function(t){e.CurrentPageId=t,e.FetchAPageOfData(!1)},e.FetchAPageOfData=function(t){t&&(e.CurrentPageId=0),o.CourseListing(t,e.CurrentPageId,e.SortBy,e.SearchByCourseName,e.StateFilter,e.CoursesPerPage).then(function(t){e.PagedData=t.data.PagedData,null!=t.data.TotalNumberOfPages&&e.BuildPager(t.data.TotalNumberOfPages)},function(e){alert("Error: "+JSON.stringify(e))})},e.ArchiveACourse=function(t){e.CourseIdToDelete=t,e.DeleteCourseModalShow=!0},e.DeleteACourseConfirm=function(){o.CourseDelete(e.CourseIdToDelete).then(function(t){e.DeleteCourseModalShow=!1,e.FetchAPageOfData(!0)},function(e){alert("Error: "+JSON.stringify(e))})}}])}(),function(){appToracGolf.controller("DashboardController",["$scope","DashboardHttp",function(e,t){e.init=function(t){e.DashboardView=t,e.$watch(function(e){return e.DashboardView},function(){e.LoadDashboardView(e.DashboardView)})},e.RootPath=function(){return _rootDir},e.LoadDashboardView=function(o){t.ViewTypeHasChanged(o,e.RootPath()).then(function(t){e.Last5Rounds=t.data.Last5Rounds,e.Top5Rounds=t.data.Top5Rounds,e.LoadHandicapGrid(o,t.data.HandicapScoreSplitGrid),e.RoundPieChart(t.data.RoundPieChart),$(window).trigger("resize")})},e.LoadHandicapGrid=function(e,t){for(var o=[],n=[],a=0;a<t.length;a++){var r=t[a];o.push([Date.UTC(r.Year,r.Month-1,r.Day),r.Score]),n.push([Date.UTC(r.Year,r.Month-1,r.Day),r.Handicap])}$("#HandicapProgression").highcharts({credits:{enabled:!1},chart:{type:"spline",zoomType:"x"},title:{text:e+" Progression"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"},title:{text:"Date"}},yAxis:[{title:{text:"Round Score",style:{color:Highcharts.getOptions().colors[0]}},labels:{format:"{value}",style:{color:Highcharts.getOptions().colors[0]}},opposite:!1},{labels:{format:"{value}",style:{color:Highcharts.getOptions().colors[1]}},title:{text:"Handicap",style:{color:Highcharts.getOptions().colors[1]}}}],plotOptions:{spline:{marker:{enabled:!0}}},series:[{name:"Round",yAxis:0,data:o},{name:"Handicap",yAxis:1,data:n}]})},e.RoundPieChart=function(e){$("#ScorePieChart").highcharts({credits:!1,chart:{type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Round Scores"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}% [{point.y} Rounds]</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{type:"pie",name:"Round Breakdown",data:e}]})}}])}(),function(){"use strict";appToracGolf.service("DashboardHttp",["$http",function(e){return{ViewTypeHasChanged:function(t,o){return e.post(o+"DashboardViewTypeChange",{ViewType:t})}}}])}(),function(){appToracGolf.controller("RoundAddController",["$scope","ValidationService","RoundHttp","$filter",function(e,t,o,n){e.init=function(t){e.model=t,e.FetchCoursesForState()},e.$watch("model.RoundDate",function(t){e.model.RoundDate=n("date")(t,"MM/dd/yyyy")}),e.$watch("model.TeeLocationId",function(t){var o=null;null!=t&&null!=e.TeeBoxLookup&&(o=e.TeeBoxLookup.FirstOrDefault(function(e){return e.CourseTeeLocationId==t}));var n=function(e,t){return null==e?null:e[t]};e.TeeBoxSelectedInfo={Yardage:n(o,"Yardage"),Par:null==o?null:o.Front9Par+o.Back9Par,Slope:n(o,"Slope"),Rating:n(o,"Rating"),MaxScorePerHole:n(o,"MaxScorePerHole"),CourseTeeBoxHandicap:n(o,"CourseTeeBoxHandicap")}}),e.SaveARound=function(){o.AddRound(e.model,t).then(function(t){e.ShowSavedSuccessfulModal=!0},function(o){t.ShowValidationErrors(e,o)})},e.SaveARoundDialogOkEvent=function(){window.location.href="ViewRounds"},e.FetchCoursesForState=function(){o.FetchCoursesForState(e.model.StateId).then(function(t){e.CourseLookup=t.data.CourseData,null!=e.CourseLookup&&e.CourseLookup.length>0&&(e.model.CourseId=e.CourseLookup[0].CourseId,e.FetchTeeBoxesForCourse())},function(e){alert("Error Calling FetchCoursesForState")})},e.FetchTeeBoxesForCourse=function(){return null==e.model.CourseId?(e.model.TeeLocationId=null,void(e.TeeBoxLookup=null)):void o.FetchTeeBoxForCourseId(e.model.CourseId).then(function(t){e.model.TeeLocationId=t.data.TeeBoxData[0].CourseTeeLocationId,e.TeeBoxLookup=t.data.TeeBoxData},function(e){alert("Error Calling FetchTeeBoxesForCourse")})}}])}(),function(){"use strict";appToracGolf.service("RoundHttp",["$http",function(e){return{AddRound:function(t,o){return e.post("AddARound",t,o)},FetchCoursesForState:function(t){return e.post("CourseSelectByState",t)},FetchTeeBoxForCourseId:function(t){return e.post("TeeLocationSelectForCourseId",t)},RoundListing:function(t,o,n,a,r,i,c,s){return e.post("RoundListingSelectPage",{ResetPager:t,PageIndexId:o,SortBy:n,CourseNameFilter:a,SeasonFilter:r,RoundsPerPage:i,RoundDateStartFilter:isNaN(Date.parse(c))?null:c,RoundDateEndFilter:isNaN(Date.parse(s))?null:s})},RoundDelete:function(t){return e.post("RoundDelete",t)}}}])}(),function(){appToracGolf.controller("RoundListingController",["$scope","ValidationService","RoundHttp","PagerFactory",function(e,t,o,n){e.$watch("SearchByRoundDateEnd",function(t,o){e.WatchRoundDateFilter(t,o)}),e.$watch("SearchByRoundDateStart",function(t,o){e.WatchRoundDateFilter(t,o)}),e.WatchRoundDateFilter=function(t,o){t!=o&&e.FetchAPageOfData(!0)},e.init=function(t,o,n,a){e.SortByLookup=o,e.RoundsPerPageLookup=a,e.SortBy=o[0].Value,e.RoundsPerPage=n,e.SearchByCourseName="",e.SearchByRoundDateStart="",e.SearchByRoundDateEnd="",e.CurrentPageId=0,e.BuildPager(t),e.FetchAPageOfData(!1)},e.BuildPager=function(t){e.TotalNumberOfPages=t,e.PagerElements=n.BuildPagerModel(t)},e.PagerClick=function(t){e.CurrentPageId=t,e.FetchAPageOfData(!1)},e.FetchAPageOfData=function(t){t&&(e.CurrentPageId=0),o.RoundListing(t,e.CurrentPageId,e.SortBy,e.SearchByCourseName,e.SeasonFilter,e.RoundsPerPage,e.SearchByRoundDateStart,e.SearchByRoundDateEnd).then(function(t){e.PagedData=t.data.PagedData.ListingData,e.CourseImageLookup=t.data.PagedData.CourseImages,null!=t.data.TotalNumberOfPages&&e.BuildPager(t.data.TotalNumberOfPages)},function(e){alert("Error: "+JSON.stringify(e))})},e.FindCourseImageFromLookup=function(t){return e.CourseImageLookup[t]},e.DeleteARound=function(t){e.RoundIdToDelete=t,e.DeleteRoundModalShow=!0},e.DeleteARoundConfirm=function(){o.RoundDelete(e.RoundIdToDelete).then(function(t){e.DeleteRoundModalShow=!1,e.FetchAPageOfData(!0),$("#SeasonHandicap").text(null==t.data.NewHandicap.SeasonHandicap?"":t.data.NewHandicap.SeasonHandicap),$("#CareerHandicap").text(null==t.data.NewHandicap.CareerHandicap?"":t.data.NewHandicap.CareerHandicap)},function(e){alert("Error: "+JSON.stringify(e))})},e.RootPath=function(){return _rootDir}}])}(),function(){appToracGolf.controller("SeasonAddController",["$scope","ValidationService","SeasonHttp","$filter",function(e,t,o,n){e.init=function(t){e.model=t},e.SaveASeason=function(){o.AddSeason(e.model,t).then(function(t){e.ShowSavedSuccessfulModal=!0},function(o){t.ShowValidationErrors(e,o)})},e.SaveASeasonDialogOkEvent=function(){window.location.href="SeasonListing"}}])}(),function(){"use strict";appToracGolf.service("SeasonHttp",["$http",function(e){return{AddSeason:function(t,o){return e.post("AddASeason",t,o)},SeasonListingFetchData:function(){return e.post("SeasonListing",{})},ArchiveASeason:function(t){return e.post("SeasonDelete",t)},SeasonMakeCurrent:function(t){return e.post("ChangeCurrentSeason",t)}}}])}(),function(){appToracGolf.controller("SeasonListingController",["$scope","ValidationService","SeasonHttp",function(e,t,o){e.init=function(t){e.CurrentSeasonId=t,e.FetchAPageOfData(!1)},e.FetchAPageOfData=function(){o.SeasonListingFetchData().then(function(t){e.PagedData=t.data.PagedData},function(e){alert("Error: "+JSON.stringify(e))})},e.ArchiveASeason=function(t,o){e.SeasonIdToDelete=t,e.NumberOfRoundsAssociatedWithThisSeason=o,e.DeleteSeasonModalShow=!0},e.ArchiveASeasonConfirm=function(){o.ArchiveASeason(e.SeasonIdToDelete).then(function(t){e.PagedData=t.data.PagedData,e.DeleteSeasonModalShow=!1},function(e){alert("Error: "+JSON.stringify(e))})},e.MakeCurrentSeason=function(e){o.SeasonMakeCurrent(e).then(function(e){e.data.Result&&window.location.reload()},function(e){alert("Error: "+JSON.stringify(e))})}}])}();var PasswordInput=React.createClass({displayName:"PasswordInput",render:function(){return React.createElement("input",{onKeyPress:this.props.onKeyPressEvent,onChange:this.props.onChangeEvent,type:"password",maxLength:"100"})}}),ChangePasswordForm=React.createClass({displayName:"ChangePasswordForm",getInitialState:function(){return{Errors:[]}},handleSubmit:function(){if(0==this.validation(!0).length){var e=this;RunAjax("ChangePassword",this.getFormData()).done(function(t){t.result&&($("#SaveSuccessfulDialog").modal("show"),React.findDOMNode(e.refs.CurrentPassword).value="",React.findDOMNode(e.refs.NewPassword1).value="",React.findDOMNode(e.refs.NewPassword2).value="")}).fail(function(t){e.setState({Errors:t.responseJSON[""]})})}},handleChange:function(e){this.validation(!1)},getFormData:function(){return{CurrentPW:React.findDOMNode(this.refs.CurrentPassword).value,NewPw1:React.findDOMNode(this.refs.NewPassword1).value,NewPw2:React.findDOMNode(this.refs.NewPassword2).value}},enterKeyCheck:function(e){"Enter"==e.key&&$("#ChangePassword").trigger("click")},validation:function(e){var t=[],o=this.getFormData();return e&&(0==o.CurrentPW.length||0==o.NewPw1.length||0==o.NewPw2.length)&&t.push("Please Fill In All The Fields."),(o.NewPw1.length>0||o.NewPw2.length>0)&&o.NewPw1!=o.NewPw2&&t.push("New Password Fields Don't Match."),this.setState({Errors:t}),t},render:function(){return React.createElement("fieldset",null,React.createElement("section",null,React.createElement("label",{className:"label"},"Current Password"),React.createElement("label",{className:"input"},React.createElement("i",{className:"icon-append fa fa-edit"}),React.createElement(PasswordInput,{ref:"CurrentPassword",onChangeEvent:this.handleChange}))),React.createElement("section",null,React.createElement("label",{className:"label"},"New Password"),React.createElement("label",{className:"input"},React.createElement("i",{className:"icon-append fa fa-edit"}),React.createElement(PasswordInput,{ref:"NewPassword1",onChangeEvent:this.handleChange}))),React.createElement("section",null,React.createElement("label",{className:"label"},"Retype New Password"),React.createElement("label",{className:"input"},React.createElement("i",{className:"icon-append fa fa-edit"}),React.createElement(PasswordInput,{ref:"NewPassword2",onKeyPressEvent:this.enterKeyCheck,onChangeEvent:this.handleChange}))),React.createElement("section",null,React.createElement("div",{className:"ValidationSummary form-group ValidationMinHeight"},React.createElement("div",{id:"ValidationError",className:"text-danger validationErrors"},React.createElement(ErrorList,{ErrorItems:this.state.Errors})))),React.createElement("section",null,React.createElement("button",{id:"ChangePassword",onClick:this.handleSubmit,className:"btn btn-base btn-icon btn-icon-right btn-sign-in pull-right",type:"button"},React.createElement("span",null,"Change Password"))))}});$(document).ready(function(){ReactDOM.render(React.createElement(ChangePasswordForm,null),document.getElementById("ChangePwForm"))}),ErrorList=React.createClass({displayName:"ErrorList",render:function(){var e=function(e,t){return React.createElement("li",{key:t},e)};return React.createElement("ul",null,this.props.ErrorItems.map(e))}});