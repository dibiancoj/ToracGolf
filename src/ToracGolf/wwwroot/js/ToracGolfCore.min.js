var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},ToracTechnologies;!function(ToracTechnologies){var JLinq;!function(JLinq){function ResetIterator(e){e.ResetIterator();for(var t=e.PreviousExpression;null!=t&&null!=t.PreviousExpression;)t.ResetIterator(),t=t.PreviousExpression;null!=t&&t.ResetIterator()}function RebuildTree(e){for(var t,r=ToracTechnologies.JLinq.Iterator.ChainableTreeWalker(e),n=0;n<r.length;n++){var o=r[n];if("Queryable"==o.TypeOfObject){t=new ToracTechnologies.JLinq.Queryable(o.CollectionSource);break}if(null!=o.PreviousExpression&&"Queryable"==o.PreviousExpression.TypeOfObject){t=new ToracTechnologies.JLinq.Queryable(o.PreviousExpression.CollectionSource);break}}if(null==t)throw"Couldn't Find A Starting Point For Querable In RebuildTree";for(var i=r.length-1;i>=0;i--){var a=r[i],u=RebuildSingleTreeNode(a,t);null!=u&&(t=u)}return t}function RebuildSingleTreeNode(e,t){if("OrderThenByIterator"===e.TypeOfObject)return null;if("WhereIterator"===e.TypeOfObject)return t.Where(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("First"===e.TypeOfObject)return t.First(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("FirstOrDefaultIterator"===e.TypeOfObject)return t.FirstOrDefault(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("SingleIterator"===e.TypeOfObject)return t.Single(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("SingleOrDefaultIterator"===e.TypeOfObject)return t.Single(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("SelectIterator"===e.TypeOfObject)return t.Select(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"SelectPredicate"==e.Key}).Value));if("SelectManyIterator"===e.TypeOfObject)return t.SelectMany(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"CollectionPropertySelector"==e.Key}).Value));if("DistinctIterator"===e.TypeOfObject)return t.Distinct(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"PropertySelector"==e.Key}).Value));if("TakeIterator"===e.TypeOfObject)return t.Take(e.HowManyToTake);if("TakeWhileIterator"===e.TypeOfObject)return t.TakeWhile(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"PredicateToTakeWhile"==e.Key}).Value));if("SkipIterator"===e.TypeOfObject)return t.Skip(e.HowManyToSkip);if("SkipWhileIterator"===e.TypeOfObject)return t.SkipWhile(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"PredicateSkipUntil"==e.Key}).Value));if("AggregateIterator"===e.TypeOfObject)return t.Aggregate(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"PredicateAggregate"==e.Key}).Value));if("AllIterator"===e.TypeOfObject)return t.All(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("AnyIterator"===e.TypeOfObject)return t.Any(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("LastIterator"===e.TypeOfObject)return t.Last(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("CountIterator"===e.TypeOfObject)return t.Count(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"WhereClausePredicate"==e.Key}).Value));if("MinIterator"===e.TypeOfObject)return t.Min();if("MaxIterator"===e.TypeOfObject)return t.Max();if("SumIterator"===e.TypeOfObject)return t.Sum();if("AverageIterator"===e.TypeOfObject)return t.Average();if("GroupIterator"===e.TypeOfObject)return t.GroupBy(ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"GroupBySelector"==e.Key}).Value));if("OrderByIterator"===e.TypeOfObject){var r=new Array,n=e,o=n.AsyncSerialized.FirstOrDefault(function(e){return"ThenBySortPropertySelectors"==e.Key});if(null!=o)for(var i=JSON.parse(o.Value),a=0;a<i.length;a++)r.push({ThenBySortOrder:n.ThenBySortPropertySelectors[a].ThenBySortOrder,PropertySelector:ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(i[a])});return new OrderByIterator(t,n.SortDirection,ToracTechnologies.JLinq.Iterator.StringToCompiledMethod(e.AsyncSerialized.First(function(e){return"SortPropertySelector"==e.Key}).Value),r)}if("ConcatArrayIterator"===e.TypeOfObject){var u=e;return t.ConcatQuery(RebuildTree(u.ConcatThisQuery))}if("ConcatQueryIterator"===e.TypeOfObject){var s=RebuildTree(e.ConcatThisQuery);return t.ConcatQuery(s)}if("UnionArrayIterator"===e.TypeOfObject){var l=e;return t.UnionQuery(RebuildTree(l.UnionThisQuery))}if("UnionQueryIterator"===e.TypeOfObject){var c=RebuildTree(e.UnionThisQuery);return t.UnionQuery(c)}if("Queryable"===e.TypeOfObject)return new ToracTechnologies.JLinq.Queryable(e.CollectionSource);throw"Level Not Implemented: "+e.TypeOfObject}var Iterator=function(){function Iterator(){}return Iterator.prototype.Where=function(e){return new WhereIterator(this,e)},Iterator.prototype.First=function(e){var t=new FirstOrDefaultIterator(this,"FirstIterator",e).Next().CurrentItem;if(null==t)throw"Can't Find First Item. Query Returned 0 Rows";return this.ResetQuery(),t},Iterator.prototype.FirstOrDefault=function(e){var t=new FirstOrDefaultIterator(this,"FirstOrDefaultIterator",e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.Single=function(e){var t=new SingleOrDefaultIterator(this,"SingleIterator",e).Next().CurrentItem;if(null==t)throw"Can't Find A Single Item. Query Returned 0 Rows";return this.ResetQuery(),t},Iterator.prototype.SingleOrDefault=function(e){var t=new SingleOrDefaultIterator(this,"SingleOrDefaultIterator",e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.Select=function(e){return new SelectIterator(this,e)},Iterator.prototype.SelectMany=function(e){return new SelectManyIterator(this,e)},Iterator.prototype.Distinct=function(e){return new DistinctIterator(this,e)},Iterator.prototype.Take=function(e){return new TakeIterator(this,e)},Iterator.prototype.TakeWhile=function(e){return new TakeWhileIterator(this,e)},Iterator.prototype.Skip=function(e){return new SkipIterator(this,e)},Iterator.prototype.SkipWhile=function(e){return new SkipWhileIterator(this,e)},Iterator.prototype.Aggregate=function(e){var t=new AggregateIterator(this,e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.All=function(e){var t=new AllIterator(this,e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.Any=function(e){var t=new AnyIterator(this,e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.Last=function(e){var t=new LastIterator(this,e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.ConcatQuery=function(e){return new ConcatIterator(this,"ConcatQueryIterator",e)},Iterator.prototype.Concat=function(e){return new ConcatIterator(this,"ConcatArrayIterator",new Queryable(e))},Iterator.prototype.UnionQuery=function(e){return new UnionIterator(this,"UnionQueryIterator",e)},Iterator.prototype.Union=function(e){return new UnionIterator(this,"UnionArrayIterator",new Queryable(e))},Iterator.prototype.Count=function(e){var t=new CountIterator(this,e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.Min=function(){var e=new MinIterator(this).Next().CurrentItem;return this.ResetQuery(),e},Iterator.prototype.Max=function(){var e=new MaxIterator(this).Next().CurrentItem;return this.ResetQuery(),e},Iterator.prototype.Sum=function(){var e=new SumIterator(this).Next().CurrentItem;return this.ResetQuery(),e},Iterator.prototype.Average=function(){var e=new AverageIterator(this).Next().CurrentItem;return this.ResetQuery(),e},Iterator.prototype.GroupBy=function(e){var t=new GroupIterator(this,e).Next().CurrentItem;return this.ResetQuery(),t},Iterator.prototype.ToDictionary=function(e){var t=new Dictionary;return t.BuildDictionary(this,e),t},Iterator.prototype.ToHashSet=function(){var e=new HashSet;return e.BuildHashSet(this),e},Iterator.prototype.Paginate=function(e,t){if(1>e)throw"Current Page Number Has To Be Greater Than 0";if(1>t)throw"How Many Records Per Page Has To Be Greater Than 0";return new SkipIterator(this,(e-1)*t).Take(t)},Iterator.prototype.OrderBy=function(e){return new OrderByIterator(this,0,e,null)},Iterator.prototype.OrderByDescending=function(e){return new OrderByIterator(this,1,e,null)},Iterator.prototype.ToArray=function(){this.ResetQuery();for(var e,t=new Array;2!==(e=this.Next()).CurrentStatus;)t.push(e.CurrentItem);return this.ResetQuery(),t},Iterator.prototype.ToArrayAsync=function(e,t,r,n){var o;null==Iterator.AsyncIsAvailable&&(Iterator.AsyncIsAvailable=Iterator.AsyncIsAvailableCheck(r)),o=null==n?Iterator.AsyncIsAvailable:n;var i=null;try{i=Iterator.BuildWebWorker(r)}catch(a){o=!1}o?(i.addEventListener("message",function(t){e(t.data),i.terminate(),i=null},!1),i.addEventListener("error",function(e){t(e),i.terminate(),i=null},!1),i.postMessage(JSON.stringify(Iterator.SerializeAsyncFuncToStringTree(this)))):e(this.ToArray())},Iterator.prototype.Next=function(){throw new Error("This method is abstract")},Iterator.prototype.ResetIterator=function(){throw new Error("This method is abstract")},Iterator.prototype.ResetQuery=function(){ResetIterator(this)},Iterator.prototype.AsyncSerializedFunc=function(){throw new Error("This method is abstract")},Iterator.prototype.SerializeMethod=function(e){return null==e?"":e.toString()},Iterator.BuildWebWorker=function(e){if(null==Iterator.WebWorkerBlobToCache){var t="self.addEventListener('message', function(e) { \n importScripts('"+e+"') \n var Query = JSON.parse(e.data); \n var TreeRebuilt = ToracTechnologies.JLinq.RebuildTree(Query); \n self.postMessage(TreeRebuilt.ToArray(), null, null); }, false);";this.WebWorkerBlobToCache=new Blob([t])}return new Worker(URL.createObjectURL(this.WebWorkerBlobToCache))},Iterator.AsyncIsAvailableCheck=function(e){if("undefined"!=typeof Worker)try{return Iterator.BuildWebWorker(e),!0}catch(t){return!1}return!1},Iterator.BuildAsyncTree=function(e){for(var t=Iterator.ChainableTreeWalker(e),r=0,n=t.length;n>r;r++){var o=t[r];o.AsyncSerialized=o.AsyncSerializedFunc()}return e},Iterator.ChainableTreeWalker=function(e){var t=new Array,r=null;for(null!=e&&(t.push(e),r=e.PreviousExpression);null!=r&&null!=r.PreviousExpression;)t.push(r),r=r.PreviousExpression;return t},Iterator.SerializeAsyncFuncToStringTree=function(e){for(var t=Iterator.ChainableTreeWalker(e),r=0,n=t.length;n>r;r++){var o=t[r];o.AsyncSerialized=o.AsyncSerializedFunc()}return e},Iterator.StringToCompiledMethod=function(MethodCode){return null==MethodCode||0===MethodCode.length?null:eval("("+MethodCode+")")},Iterator.WebWorkerBlobToCache=null,Iterator.AsyncIsAvailable=null,Iterator}();JLinq.Iterator=Iterator,function(e){e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending"}(JLinq.SortOrder||(JLinq.SortOrder={}));var SortOrder=JLinq.SortOrder,KeyValuePair=function(){function e(e,t){this.Key=e,this.Value=t}return e}();JLinq.KeyValuePair=KeyValuePair;var CallbackIterator=function(){function e(e,t){this.ForEachItemCallBack=e,this.ExecuteResults=t}return e}();JLinq.CallbackIterator=CallbackIterator,function(e){e[e.NotYetStarted=0]="NotYetStarted",e[e.Running=1]="Running",e[e.Completed=2]="Completed"}(JLinq.IteratorStatus||(JLinq.IteratorStatus={}));var IteratorStatus=JLinq.IteratorStatus,IteratorResult=function(){function e(e,t){this.CurrentItem=e,this.CurrentStatus=t}return e}();JLinq.IteratorResult=IteratorResult;var Queryable=function(e){function t(t){this.CollectionSource=t,this.Index=0,this.CollectionLength=this.CollectionSource.length,this.TypeOfObject="Queryable",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.Index=0},t.prototype.Next=function(){return this.Index===this.CollectionLength?new IteratorResult(null,2):new IteratorResult(this.CollectionSource[this.Index++],1)},t.prototype.AsyncSerializedFunc=function(){return null},t}(Iterator);JLinq.Queryable=Queryable;var WhereIterator=function(e){function t(t,r){this.PreviousExpression=t,this.WhereClausePredicate=r,this.TypeOfObject="WhereIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e;;)if(e=this.PreviousExpression.Next(),2===e.CurrentStatus||this.WhereClausePredicate(e.CurrentItem))return e},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.WhereIterator=WhereIterator;var FirstOrDefaultIterator=function(e){function t(t,r,n){this.PreviousExpression=t,this.WhereClausePredicate=n,this.HasNullWhereClause=null==this.WhereClausePredicate,this.TypeOfObject=r,e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e;;)if(e=this.PreviousExpression.Next(),2===e.CurrentStatus||this.HasNullWhereClause||this.WhereClausePredicate(e.CurrentItem))return e},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.FirstOrDefaultIterator=FirstOrDefaultIterator;var SingleOrDefaultIterator=function(e){function t(t,r,n){this.PreviousExpression=t,this.WhereClausePredicate=n,this.HasNullWhereClause=null==this.WhereClausePredicate,this.TypeOfObject=r,e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e,t=null,r=!1;2!==(e=this.PreviousExpression.Next()).CurrentStatus;)if(this.HasNullWhereClause||this.WhereClausePredicate(e.CurrentItem)){if(r)throw"We Already Have A Match. SingleOrDefault Must Only Have 1 or 0 Items Returned. Use FirstOrDefault If You Are Expecting Multiple Items And Just Want To Grab The First Item";r=!0,t=e.CurrentItem}return new IteratorResult(t,2)},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.SingleOrDefaultIterator=SingleOrDefaultIterator;var SelectIterator=function(e){function t(t,r){this.PreviousExpression=t,this.SelectPredicate=r,this.TypeOfObject="SelectIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e;;)return e=this.PreviousExpression.Next(),2===e.CurrentStatus?new IteratorResult(null,2):new IteratorResult(this.SelectPredicate(e.CurrentItem),1)},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("SelectPredicate",e.prototype.SerializeMethod.call(this,this.SelectPredicate))]},t}(Iterator);JLinq.SelectIterator=SelectIterator;var SelectManyIterator=function(e){function t(t,r){this.PreviousExpression=t,this.CollectionPropertySelector=r,this.CollectionItemsToReturn=null,this.TypeOfObject="SelectManyIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.CollectionItemsToReturn=null},t.prototype.Next=function(){for(var e;;){if(null!=this.CollectionItemsToReturn){var t=this.CollectionItemsToReturn.Next();if(2!==t.CurrentStatus)return t;this.CollectionItemsToReturn=null}if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(null,2);var r=this.CollectionPropertySelector(e.CurrentItem);null!=r&&r.length>0&&(this.CollectionItemsToReturn=new Queryable(r))}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("CollectionPropertySelector",e.prototype.SerializeMethod.call(this,this.CollectionPropertySelector))]},t}(Iterator);JLinq.SelectManyIterator=SelectManyIterator;var DistinctIterator=function(e){function t(t,r){this.PreviousExpression=t,this.PropertySelector=r,this.DistinctLookup=new HashSet,this.TypeOfObject="DistinctIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.DistinctLookup=new HashSet},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(null,2);var t=this.PropertySelector(e.CurrentItem);if(null!=t&&this.DistinctLookup.Add(t))return new IteratorResult(t,1)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("PropertySelector",e.prototype.SerializeMethod.call(this,this.PropertySelector))]},t}(Iterator);JLinq.DistinctIterator=DistinctIterator;var TakeIterator=function(e){function t(t,r){this.PreviousExpression=t,this.HowManyToTake=r,this.HowManyHaveWeReturned=0,this.TypeOfObject="TakeIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.HowManyHaveWeReturned=0},t.prototype.Next=function(){if(this.WeReturnedWhatWeWantedAlready())return new IteratorResult(null,2);for(var e;;)if(e=this.PreviousExpression.Next(),2===e.CurrentStatus||!this.WeReturnedWhatWeWantedAlready())return 2!==e.CurrentStatus&&this.HowManyHaveWeReturned++,e},t.prototype.AsyncSerializedFunc=function(){return null},t.prototype.WeReturnedWhatWeWantedAlready=function(){return this.HowManyHaveWeReturned===this.HowManyToTake},t}(Iterator);JLinq.TakeIterator=TakeIterator;var TakeWhileIterator=function(e){function t(t,r){this.PreviousExpression=t,this.PredicateToTakeWhile=r,this.TypeOfObject="TakeWhileIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e;;)return e=this.PreviousExpression.Next(),2===e.CurrentStatus||this.PredicateToTakeWhile(e.CurrentItem)?e:new IteratorResult(null,2)},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("PredicateToTakeWhile",e.prototype.SerializeMethod.call(this,this.PredicateToTakeWhile))]},t}(Iterator);JLinq.TakeWhileIterator=TakeWhileIterator;var SkipIterator=function(e){function t(t,r){this.PreviousExpression=t,this.HowManyToSkip=r,this.HowManyHaveWeSkipped=0,this.TypeOfObject="SkipIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.HowManyHaveWeSkipped=0},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return e;if(!(this.HowManyToSkip>this.HowManyHaveWeSkipped))return e;this.HowManyHaveWeSkipped++}},t.prototype.AsyncSerializedFunc=function(){return null},t}(Iterator);JLinq.SkipIterator=SkipIterator;var SkipWhileIterator=function(e){function t(t,r){this.PreviousExpression=t,this.PredicateSkipUntil=r,this.TypeOfObject="SkipWhileIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.ReturnRestOfElements=!1},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),this.ReturnRestOfElements||2===e.CurrentStatus)return e;if(!this.PredicateSkipUntil(e.CurrentItem))return this.ReturnRestOfElements=!0,new IteratorResult(e.CurrentItem,1)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("PredicateSkipUntil",e.prototype.SerializeMethod.call(this,this.PredicateSkipUntil))]},t}(Iterator);JLinq.SkipWhileIterator=SkipWhileIterator;var AggregateIterator=function(e){function t(t,r){this.PreviousExpression=t,this.PredicateAggregate=r,this.TypeOfObject="AggregateIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e,t=null;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(t,2);t=null==t?e.CurrentItem:this.PredicateAggregate(t,e.CurrentItem)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("PredicateAggregate",e.prototype.SerializeMethod.call(this,this.PredicateAggregate))]},t}(Iterator);JLinq.AggregateIterator=AggregateIterator;var AllIterator=function(e){function t(t,r){this.PreviousExpression=t,this.WhereClausePredicate=r,this.TypeOfObject="AllIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(!0,2);if(!this.WhereClausePredicate(e.CurrentItem))return new IteratorResult(!1,2)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.AllIterator=AllIterator;var AnyIterator=function(e){function t(t,r){this.PreviousExpression=t,this.WhereClausePredicate=r,this.HasNullWhereClause=null==this.WhereClausePredicate,this.TypeOfObject="AnyIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(!1,2);if(this.HasNullWhereClause||this.WhereClausePredicate(e.CurrentItem))return new IteratorResult(!0,2)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.AnyIterator=AnyIterator;var LastIterator=function(e){function t(t,r){this.PreviousExpression=t,this.WhereClausePredicate=r,this.HasNullWhereClause=null==this.WhereClausePredicate,this.TypeOfObject="LastIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.LastItemFound=null},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(this.LastItemFound,2);(this.HasNullWhereClause||this.WhereClausePredicate(e.CurrentItem))&&(this.LastItemFound=e.CurrentItem)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.LastIterator=LastIterator;var ConcatIterator=function(e){function t(t,r,n){this.PreviousExpression=t,this.ConcatThisQuery=n,this.TypeOfObject=r,e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.ConcatThisQuery.ResetQuery()},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2!==e.CurrentStatus)return e;for(;;)return this.ConcatThisQuery.Next()}},t.prototype.AsyncSerializedFunc=function(){return"ConcatQueryIterator"==this.TypeOfObject&&Iterator.SerializeAsyncFuncToStringTree(this.ConcatThisQuery),null},t}(Iterator);JLinq.ConcatIterator=ConcatIterator;var UnionIterator=function(e){function t(t,r,n){this.PreviousExpression=t,this.UnionThisQuery=n,this.TypeOfObject=r,this.HashSetStore=new HashSet,e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.UnionThisQuery.ResetQuery(),this.HashSetStore=new HashSet},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2!==e.CurrentStatus&&this.HashSetStore.Add(e.CurrentItem))return e;for(;;){if(e=this.UnionThisQuery.Next(),2===e.CurrentStatus)return e;if(this.HashSetStore.Add(e.CurrentItem))return e}}},t.prototype.AsyncSerializedFunc=function(){return"UnionQueryIterator"==this.TypeOfObject&&Iterator.SerializeAsyncFuncToStringTree(this.UnionThisQuery),null},t}(Iterator);JLinq.UnionIterator=UnionIterator;var CountIterator=function(e){function t(t,r){this.PreviousExpression=t,this.WhereClausePredicate=r,this.HasNullWhereClause=null==this.WhereClausePredicate,this.TypeOfObject="CountIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e,t=0;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(t,2);(this.HasNullWhereClause||this.WhereClausePredicate(e.CurrentItem))&&t++}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("WhereClausePredicate",e.prototype.SerializeMethod.call(this,this.WhereClausePredicate))]},t}(Iterator);JLinq.CountIterator=CountIterator;var MinIterator=function(e){function t(t){this.PreviousExpression=t,this.CurrentLowestNumber=null,this.TypeOfObject="MinIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.CurrentLowestNumber=null},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(this.CurrentLowestNumber,2);(null===this.CurrentLowestNumber||e.CurrentItem<this.CurrentLowestNumber)&&(this.CurrentLowestNumber=e.CurrentItem)}},t.prototype.AsyncSerializedFunc=function(){return null},t}(Iterator);JLinq.MinIterator=MinIterator;var MaxIterator=function(e){function t(t){this.PreviousExpression=t,this.CurrentLargestNumber=null,this.TypeOfObject="MaxIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.CurrentLargestNumber=null},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(this.CurrentLargestNumber,2);(null===this.CurrentLargestNumber||e.CurrentItem>this.CurrentLargestNumber)&&(this.CurrentLargestNumber=e.CurrentItem)}},t.prototype.AsyncSerializedFunc=function(){return null},t}(Iterator);JLinq.MaxIterator=MaxIterator;var SumIterator=function(e){function t(t){this.PreviousExpression=t,this.CurrentSumTally=0,this.TypeOfObject="SumIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.CurrentSumTally=0},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(this.CurrentSumTally,2);this.CurrentSumTally+=e.CurrentItem}},t.prototype.AsyncSerializedFunc=function(){return null},t}(Iterator);JLinq.SumIterator=SumIterator;var AverageIterator=function(e){function t(t){this.PreviousExpression=t,this.CurrentSumTally=0,this.CurrentItemCountTally=0,this.TypeOfObject="AverageIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.CurrentSumTally=0,this.CurrentItemCountTally=0},t.prototype.Next=function(){for(var e;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(this.CurrentSumTally/this.CurrentItemCountTally,2);this.CurrentSumTally+=e.CurrentItem,this.CurrentItemCountTally++}},t.prototype.AsyncSerializedFunc=function(){return null},t}(Iterator);JLinq.AverageIterator=AverageIterator;var GroupIterator=function(e){function t(t,r){this.PreviousExpression=t,this.GroupBySelector=r,this.TypeOfObject="GroupIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){for(var e,t=new Dictionary;;){if(e=this.PreviousExpression.Next(),2===e.CurrentStatus)return new IteratorResult(t.GetAllItems().Select(function(e){return{Key:e.Key,Items:e.Value}}).ToArray(),2);var r=this.GroupBySelector(e.CurrentItem),n=t.GetItem(r);null==n?t.Add(r,[e.CurrentItem]):n.push(e.CurrentItem)}},t.prototype.AsyncSerializedFunc=function(){return[new KeyValuePair("GroupBySelector",e.prototype.SerializeMethod.call(this,this.GroupBySelector))]},t}(Iterator);JLinq.GroupIterator=GroupIterator;var OrderByIterator=function(e){function t(t,r,n,o){this.PreviousExpression=t,this.SortDirection=r,this.SortPropertySelector=n,this.ThenBySortPropertySelectors=o,this.NeedToBuildDataSource=!0,this.TypeOfObject="OrderByIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){this.DataSource=null,this.NeedToBuildDataSource=!0},t.prototype.Next=function(){return this.NeedToBuildDataSource&&(this.DataSource=new Queryable(this.SortData(this.PreviousExpression.ToArray(),this.SortPropertySelector,this.SortDirection,this.ThenBySortPropertySelectors)),this.NeedToBuildDataSource=!1),this.DataSource.Next()},t.prototype.AsyncSerializedFunc=function(){var t=new Array;if(null!=this.ThenBySortPropertySelectors)for(var r=0;r<this.ThenBySortPropertySelectors.length;r++)t.push(e.prototype.SerializeMethod.call(this,this.ThenBySortPropertySelectors[r].PropertySelector));return[new KeyValuePair("SortPropertySelector",e.prototype.SerializeMethod.call(this,this.SortPropertySelector)),new KeyValuePair("ThenBySortPropertySelectors",JSON.stringify(t))]},t.prototype.ThenBy=function(e){return new OrderThenByIterator(this,e,0)},t.prototype.ThenByDescending=function(e){return new OrderThenByIterator(this,e,1)},t.prototype.SortData=function(e,t,r,n){var o=this,i=null!=n&&n.Any(),a=null;i&&(a=n.Count());var u=0===r;return e.sort(function(e,r){var s=o.DetermineSortIndex(e,r,t,u);if(0===s&&i)for(var l=0;a>l;l++){var c=n[l];if(s=o.DetermineSortIndex(e,r,c.PropertySelector,0===c.ThenBySortOrder),0!==s)return s}return s}),e},t.prototype.DetermineSortIndex=function(e,t,r,n){var o=r(e),i=r(t);return null==o&&null==i?0:null==o&&null!=i?n?-1:1:null!=o&&null==i?n?1:-1:o>i?n?1:-1:i>o?n?-1:1:0},t}(Iterator);JLinq.OrderByIterator=OrderByIterator;var OrderThenByIterator=function(e){function t(t,r,n){this.PreviousExpression=t,this.BuildDependencyOnOrderBy(t,r,n),this.TypeOfObject="OrderThenByIterator",e.call(this)}return __extends(t,e),t.prototype.ResetIterator=function(){},t.prototype.Next=function(){return this.PreviousExpression.Next()},t.prototype.AsyncSerializedFunc=function(){return null},t.prototype.ThenBy=function(e){return new t(this,e,0)},t.prototype.ThenByDescending=function(e){return new t(this,e,1)},t.prototype.BuildDependencyOnOrderBy=function(e,t,r){var n=Iterator.ChainableTreeWalker(e).FirstOrDefault(function(e){return"OrderByIterator"===e.TypeOfObject});if(null==n)throw"Can't Find Order By Statement. Set An 'OrderBy' Or 'OrderByDescending' Before Calling 'ThenBy' / 'ThenByDescending'";null==n.ThenBySortPropertySelectors&&(n.ThenBySortPropertySelectors=new Array);var o={PropertySelector:t,ThenBySortOrder:r};n.ThenBySortPropertySelectors.push(o)},t}(Iterator);JLinq.OrderThenByIterator=OrderThenByIterator;var Dictionary=function(){function e(){this.InternalDictionary={},this.TypeOfTKey=null,this.DatePropertiesForMultiKey=null}return e.prototype.ContainsKey=function(e){return this.InternalDictionary.hasOwnProperty(this.TKeyToInternalKey(e))},e.prototype.Add=function(e,t){if(null==this.TypeOfTKey&&null!=e&&(this.TypeOfTKey=typeof e,"object"===this.TypeOfTKey&&(this.IsDateProperty(e)?this.TypeOfTKey="date":this.DatePropertiesForMultiKey=this.DateColumnsInMultiKeyObject(e))),this.ContainsKey(e))throw"Dictionary Key Of "+e+" Already Found In Dictionary";this.InternalDictionary[this.TKeyToInternalKey(e)]=t},e.prototype.GetItem=function(e){return this.GetItemHelper(this.TKeyToInternalKey(e))},e.prototype.Keys=function(){var e=new Array;for(var t in this.InternalDictionary)this.InternalDictionary.hasOwnProperty(t)&&e.push(this.InternalKeyToTKey(t));return e},e.prototype.Values=function(){var e=new Array;for(var t in this.InternalDictionary)this.InternalDictionary.hasOwnProperty(t)&&e.push(this.GetItem(this.InternalKeyToTKey(t)));return e},e.prototype.Remove=function(e){delete this.InternalDictionary[this.TKeyToInternalKey(e)]},e.prototype.BuildDictionary=function(e,t){var r;for(e.ResetQuery();2!==(r=e.Next()).CurrentStatus;)this.Add(t(r.CurrentItem),r.CurrentItem);e.ResetQuery()},e.prototype.Count=function(){var e=0;for(var t in this.InternalDictionary)this.InternalDictionary.hasOwnProperty(t)&&e++;return e},e.prototype.GetAllItems=function(){var e=new Array;for(var t in this.InternalDictionary)this.InternalDictionary.hasOwnProperty(t)&&e.push(new KeyValuePair(this.InternalKeyToTKey(t),this.GetItemHelper(t)));return e},e.prototype.GetItemHelper=function(e){return this.InternalDictionary[e]},e.prototype.TKeyToInternalKey=function(e){return"date"===this.TypeOfTKey?e:JSON.stringify(e)},e.prototype.InternalKeyToTKey=function(e){var t=this;

return"date"===this.TypeOfTKey?e:JSON.parse(e,function(e,r){return null!=t.DatePropertiesForMultiKey&&t.DatePropertiesForMultiKey.ContainsKey(e)?new Date(r):r})},e.prototype.IsDateProperty=function(e){return e instanceof Date&&!isNaN(e.valueOf())},e.prototype.DateColumnsInMultiKeyObject=function(t){var r=new e;for(var n in t)this.IsDateProperty(t[n])&&r.Add(n,!0);return r},e}();JLinq.Dictionary=Dictionary;var HashSet=function(){function e(){this.InternalHashSet=new Dictionary}return e.prototype.ContainsItem=function(e){return this.InternalHashSet.ContainsKey(e)},e.prototype.Add=function(e){return this.ContainsItem(e)?!1:(this.InternalHashSet.Add(e,null),!0)},e.prototype.Values=function(){return this.InternalHashSet.Keys()},e.prototype.Remove=function(e){this.InternalHashSet.Remove(e)},e.prototype.BuildHashSet=function(e){var t;for(e.ResetQuery();2!==(t=e.Next()).CurrentStatus;)this.Add(t.CurrentItem);e.ResetQuery()},e.prototype.Count=function(){return this.InternalHashSet.Count()},e}();JLinq.HashSet=HashSet,JLinq.RebuildTree=RebuildTree,JLinq.RebuildSingleTreeNode=RebuildSingleTreeNode}(JLinq=ToracTechnologies.JLinq||(ToracTechnologies.JLinq={}))}(ToracTechnologies||(ToracTechnologies={})),Array.prototype.AsQueryable=function(){return new ToracTechnologies.JLinq.Queryable(this)},Array.prototype.Where=function(e){return new ToracTechnologies.JLinq.Queryable(this).Where(e)},Array.prototype.First=function(e){return new ToracTechnologies.JLinq.Queryable(this).First(e)},Array.prototype.FirstOrDefault=function(e){return new ToracTechnologies.JLinq.Queryable(this).FirstOrDefault(e)},Array.prototype.Single=function(e){return new ToracTechnologies.JLinq.Queryable(this).Single(e)},Array.prototype.SingleOrDefault=function(e){return new ToracTechnologies.JLinq.Queryable(this).SingleOrDefault(e)},Array.prototype.Select=function(e){return new ToracTechnologies.JLinq.Queryable(this).Select(e)},Array.prototype.SelectMany=function(e){return new ToracTechnologies.JLinq.Queryable(this).SelectMany(e)},Array.prototype.Distinct=function(e){return new ToracTechnologies.JLinq.Queryable(this).Distinct(e)},Array.prototype.Take=function(e){return new ToracTechnologies.JLinq.Queryable(this).Take(e)},Array.prototype.TakeWhile=function(e){return new ToracTechnologies.JLinq.Queryable(this).TakeWhile(e)},Array.prototype.Skip=function(e){return new ToracTechnologies.JLinq.Queryable(this).Skip(e)},Array.prototype.SkipWhile=function(e){return new ToracTechnologies.JLinq.Queryable(this).SkipWhile(e)},Array.prototype.Aggregate=function(e){return new ToracTechnologies.JLinq.Queryable(this).Aggregate(e)},Array.prototype.All=function(e){return new ToracTechnologies.JLinq.Queryable(this).All(e)},Array.prototype.Any=function(e){return new ToracTechnologies.JLinq.Queryable(this).Any(e)},Array.prototype.Last=function(e){return new ToracTechnologies.JLinq.Queryable(this).Last(e)},Array.prototype.ConcatQuery=function(e){return new ToracTechnologies.JLinq.Queryable(this).ConcatQuery(e)},Array.prototype.Concat=function(e){return new ToracTechnologies.JLinq.Queryable(this).Concat(e)},Array.prototype.UnionQuery=function(e){return new ToracTechnologies.JLinq.Queryable(this).UnionQuery(e)},Array.prototype.Union=function(e){return new ToracTechnologies.JLinq.Queryable(this).Union(e)},Array.prototype.Count=function(){return this.length},Array.prototype.Count=function(e){return new ToracTechnologies.JLinq.Queryable(this).Count(e)},Array.prototype.Min=function(){return new ToracTechnologies.JLinq.Queryable(this).Min()},Array.prototype.Max=function(){return new ToracTechnologies.JLinq.Queryable(this).Max()},Array.prototype.Sum=function(){return new ToracTechnologies.JLinq.Queryable(this).Sum()},Array.prototype.Average=function(){return new ToracTechnologies.JLinq.Queryable(this).Average()},Array.prototype.GroupBy=function(e){return new ToracTechnologies.JLinq.Queryable(this).GroupBy(e)},Array.prototype.ToDictionary=function(e){return new ToracTechnologies.JLinq.Queryable(this).ToDictionary(e)},Array.prototype.ToHashSet=function(){return new ToracTechnologies.JLinq.Queryable(this).ToHashSet()},Array.prototype.Paginate=function(e,t){return new ToracTechnologies.JLinq.Queryable(this).Paginate(e,t)},Array.prototype.OrderBy=function(e){return new ToracTechnologies.JLinq.Queryable(this).OrderBy(e)},Array.prototype.OrderByDescending=function(e){return new ToracTechnologies.JLinq.Queryable(this).OrderByDescending(e)};var ToracTechnologies;!function(e){!function(e){function t(e,t,r,n,o,i){(null==e||0==e.length)&&alert("RunAjaxCall: Url Is Mandatory");var a=JSON.stringify(t);$.ajax({type:"POST",url:e,data:a,contentType:"application/json; charset=utf-8",dataType:"json",success:r,error:n,async:o,global:i})}function r(e,t){for(var r=t,n=0;n<e.length;n++){var o=$(e[n]);$(document).ajaxStart(function(){o.fadeIn(r)}),$(document).ajaxStop(function(){o.fadeOut(r)})}}function n(e){u=e,e&&($(document).ajaxSend(i),$(document).ajaxComplete(a))}function o(){return u?void $.each(l,function(e,t){t.abort(),delete l[t._id],$.each(l,function(e,t){t.abort(),delete l[t._id]})}):void alert("Please Call ImplementAbortAjaxCalls If You Want To Use The Abort AJAX Functionality")}function i(e,t){t._id=++s,l[t._id]=t}function a(e,t){delete l[t._id]}!function(e){e[e.fast=0]="fast",e[e.slow=1]="slow"}(e.FadeInOutSpeedEnum||(e.FadeInOutSpeedEnum={}));e.FadeInOutSpeedEnum;e.RunAjaxCall=t,e.SetupAjaxWaitSpinner=r,e.ImplementAbortAjaxCalls=n,e.AbortAllAjaxCalls=o;var u,s=0,l={}}(e.Ajax||(e.Ajax={}));e.Ajax}(ToracTechnologies||(ToracTechnologies={}));